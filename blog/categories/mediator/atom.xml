<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: mediator | Limon's Blog]]></title>
  <link href="http://limon.top/blog/categories/mediator/atom.xml" rel="self"/>
  <link href="http://limon.top/"/>
  <updated>2017-03-15T22:10:23+08:00</updated>
  <id>http://limon.top/</id>
  <author>
    <name><![CDATA[Limon]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[ä¸€ä¸ªä»“åº“çš„æ¨¡å—åŒ–ä¹‹è·¯]]></title>
    <link href="http://limon.top/mediator/"/>
    <updated>2017-02-13T20:12:43+08:00</updated>
    <id>http://limon.top/mediator</id>
    <content type="html"><![CDATA[<h1>ä¸€ä¸ªä»“åº“çš„æ¨¡å—åŒ–ä¹‹è·¯</h1>

<p>æœ¬æ–‡å¯¹åº”çš„ GitHub é¡¹ç›® <a href="https://github.com/Limon-O-O/Lego">Lego</a>ï¼Œä¸å®šæœŸæ›´æ–°å®è·µæ„Ÿæ‚Ÿã€‚</p>

<p>æœ¬æ–‡è®²è§£çš„æ˜¯å¦‚ä½•åœ¨ä¸€ä¸ªä»“åº“è¿›è¡Œæ¨¡å—åŒ–ï¼Œå½“ç„¶ï¼Œå¦‚æœä½ æƒ³æ‹†åˆ†ä¸€ä¸ªæ¨¡å—å¯¹åº”ä¸€ä¸ªä»“åº“ï¼Œä¹Ÿè¡Œï¼Œæ”¹æ”¹å°±æ˜¯äº†ã€‚</p>

<p>å»ºè®®å…ˆä»”ç»†é˜…è¯» Mr.Casa çš„<a href="http://casatwy.com/modulization_in_action.html">ã€Šåœ¨ç°æœ‰å·¥ç¨‹ä¸­å®æ–½åŸºäºCTMediatorçš„ç»„ä»¶åŒ–æ–¹æ¡ˆã€‹</a>ï¼Œæœ¬æ–‡é­”æ”¹äºæ­¤ã€‚</p>

<p>æœ¬æ–‡è¦ç‚¹ï¼š</p>

<ol>
<li>Swift é¡¹ç›®æ€æ ·ä½¿ç”¨ Mediator è¿›è¡Œæ¨¡å—åŒ–</li>
<li>ä½¿ç”¨ CocoaPods ç®¡ç†æ¨¡å—</li>
<li>ä¸€é”®åˆ›å»ºæ¨¡å—ï¼ˆåŒ…æ‹¬ Xcode å·¥ç¨‹ï¼‰ï¼Œä¸€é”®å‘å¸ƒ <code>Podåº“</code></li>
<li>å‘å¸ƒç§æœ‰åº“ä¸ä½¿ç”¨ <code>pod repo push</code>ï¼Œä¸è¿›è¡ŒéªŒè¯ï¼Œå³ä½¿åº“ç¼–è¯‘ä¸é€šè¿‡ï¼Œä¹Ÿå¯ä»¥ release æ–°ç‰ˆæœ¬</li>
<li>Swift çš„ä¸€äº›å®è·µå¿ƒå¾—</li>
</ol>


<p>æœ¬æ–‡åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š</p>

<p>ä¸€ã€<a href="https://github.com/Limon-O-O/Lego#%E4%B8%80lego-%E7%9B%AE%E5%BD%95%E8%A7%A3%E6%9E%90">ç›®å½•è§£æ</a></p>

<p>äºŒã€<a href="https://github.com/Limon-O-O/Lego#%E4%BA%8C%E5%AE%9E%E6%88%98">å®æˆ˜</a></p>

<p>ä¸‰ã€<a href="https://github.com/Limon-O-O/Lego#%E4%B8%89%E5%AE%9E%E8%B7%B5%E5%BF%83%E5%BE%97">å®è·µå¿ƒå¾—</a></p>

<p><br /></p>

<h2>ä¸€ã€Lego ç›®å½•è§£æ</h2>

<pre><code>Lego
â”œâ”€â”€ ConfigPrivatePod
â”œâ”€â”€ Frameworks
â”‚Â Â  â”œâ”€â”€ EggKit
â”‚Â Â  â”œâ”€â”€ LegoKit
â”‚Â Â  â””â”€â”€ Networking
â”œâ”€â”€ Modules
â”‚Â Â  â”œâ”€â”€ CTMediator+Door
â”‚Â Â  â”œâ”€â”€ Door
â”‚Â Â  â”œâ”€â”€ Lego
â””â”€â”€ Specs
    â”œâ”€â”€ EggKit
    â”œâ”€â”€ LegoKit
    â””â”€â”€ Networking
        â””â”€â”€ 1.0.1
            â””â”€â”€ Networking.podspec
</code></pre>

<ol>
<li><code>ConfigPrivatePod</code> æ–‡ä»¶å¤¹ï¼Œå­˜æ”¾ç€é…ç½®ç§æœ‰æ¨¡å—çš„è„šæœ¬</li>
<li><code>Frameworks</code> æ–‡ä»¶å¤¹ï¼Œå­˜æ”¾ç€å„ç§ <code>framework</code>ï¼Œ<code>EggKit</code> ä»£è¡¨å…¬å¸å„é¡¹ç›®é€šç”¨åº“ï¼Œ<code>LegoKit</code> ä»£è¡¨æœ¬é¡¹ç›®å„æ¨¡å—é€šç”¨åº“</li>
<li><code>Modules</code> æ–‡ä»¶å¤¹ï¼Œå­˜æ”¾ç€ <code>Lego</code> é¡¹ç›®çš„å…¨éƒ¨æ¨¡å—ï¼Œå…¶ä¸­ <code>Modules/Lego</code> å°±æ˜¯ä¸»æ¨¡å—</li>
<li><code>Specs</code> æ–‡ä»¶å¤¹ï¼Œå­˜æ”¾ç€ <code>framework</code> å’Œ <code>æ¨¡å—</code> çš„ç‰ˆæœ¬çš„ <code>podName.podspec</code>ï¼Œå³å¸¸è¯´çš„ <code>Private Spec Repo</code></li>
</ol>


<p><br /></p>

<h2>Config PrivatePod</h2>

<pre><code>ConfigPrivatePod
â”œâ”€â”€ config.sh
â””â”€â”€ pod-template
â””â”€â”€ templates
    â”œâ”€â”€ Podfile
    â”œâ”€â”€ module
    â”‚Â Â  â”œâ”€â”€ extension
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Mediator+Project.swift
    â”‚Â Â  â”‚Â Â  â””â”€â”€ ProjectProtocol.swift
    â”‚Â Â  â””â”€â”€ target
    â”‚Â Â      â””â”€â”€ Target_Project.swift
    â”œâ”€â”€ pod.podspec
    â”œâ”€â”€ release.sh
    â”œâ”€â”€ update_version.sh
    â””â”€â”€ version_compare.sh
</code></pre>

<p><code>ConfigPrivatePod</code> æ–‡ä»¶å¤¹å†…å«å¿«é€Ÿé…ç½®ç§æœ‰æ¨¡å—çš„è„šæœ¬</p>

<p><code>config.sh</code> æ–°åˆ›å»º <code>Podåº“</code> æ—¶ä½¿ç”¨ï¼Œä½œç”¨ï¼š</p>

<ol>
<li>åˆ›å»º Xcode å·¥ç¨‹ï¼ˆæ³¨ï¼šåŸç†å’Œ <code>pod lib create NAME</code> ä¸€è‡´ï¼‰</li>
<li>ä¸º <code>Podåº“</code> é…ç½®åŸºæœ¬æ–‡ä»¶ï¼Œå¦‚ <code>pod.podspec</code></li>
<li>é…ç½® <code>release.sh</code> è„šæ­¥ï¼Œéœ€è¦ä¸º <code>Podåº“</code> å‘å¸ƒæ–°ç‰ˆæœ¬æ—¶ï¼Œç›´æ¥æ•²å‘½ä»¤ <code>./release.sh</code> å³å¯</li>
<li>ä¸ºæ¨¡å—é…ç½®ä¸ <code>Mediator</code> å…³è”çš„æ–‡ä»¶ï¼Œå¦‚ï¼š<code>Target_Project.swift</code>, <code>ProjectProtocol.swift</code>, <code>Mediator+Project.swift</code></li>
</ol>


<p><br /></p>

<h2>å…³äº CocoaPods Specs</h2>

<p>å¤§å®¶éƒ½çŸ¥é“ CocoaPods å¯ä»¥æŒ‡å®šç¬¬ä¸‰æ–¹ä¾èµ–çš„ç‰ˆæœ¬ï¼Œæ¯”å¦‚ï¼š<code>pod 'MonkeyKing', '~&gt; 1.2.1'</code></p>

<p>é‚£ CocoaPods æ˜¯å¦‚ä½•ç®¡ç†æ‰€æœ‰å·²ç»å‘å¸ƒäº†çš„ç‰ˆæœ¬ï¼Ÿ
ç­”æ¡ˆå°±åœ¨æ­¤ <a href="https://github.com/CocoaPods/Specs">CocoaPods Specs</a> ä»“åº“ã€‚Specs ä»“åº“é‡Œé¢å­˜æ”¾ç€æ‰€æœ‰å·²ç»å‘å¸ƒäº†çš„ç‰ˆæœ¬ã€‚</p>

<p>æ¯”å¦‚ MonkeyKing çš„å·²å‘å¸ƒçš„ç‰ˆæœ¬ <a href="https://github.com/CocoaPods/Specs/tree/master/Specs/f/6/5/MonkeyKing">Specs</a>ï¼Œåœ¨æ­¤ <a href="https://github.com/CocoaPods/Specs/tree/master/Specs/f/6/5/MonkeyKing">Specs</a> é‡Œé¢ï¼Œåˆ—ä¸¾ MonkeyKing æ‰€æœ‰å·²ç» released çš„ç‰ˆæœ¬ã€‚</p>

<p>MonkeyKing åœ¨ <code>Specs</code> æ–‡ä»¶å¤¹çš„å‘ˆç°ï¼š</p>

<pre><code>â””â”€â”€ Specs
    â””â”€â”€ MonkeyKing
        â””â”€â”€ 0.0.1
            â””â”€â”€ MonkeyKing.podspec.json
        .......

        â””â”€â”€ 0.9.3
            â””â”€â”€ MonkeyKing.podspec.json
        â””â”€â”€ 1.1.0
            â””â”€â”€ MonkeyKing.podspec.json
        â””â”€â”€ 1.2.0
            â””â”€â”€ MonkeyKing.podspec.json
        â””â”€â”€ 1.2.1
            â””â”€â”€ MonkeyKing.podspec.json
        â””â”€â”€ 1.2.2
            â””â”€â”€ MonkeyKing.podspec.json
</code></pre>

<p><code>https://github.com/CocoaPods/Specs.git</code> æ˜¯ CocoaPods å®˜æ–¹çš„ <code>Specs</code> ä»“åº“ï¼Œå¹³æ—¶æˆ‘ä»¬ç”¨ <code>pod trunk push podName.podspec</code> æ¥å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œå…¶å®å°±æ˜¯å‘æ­¤ä»“åº“æ·»åŠ ä¸€ä¸ªåä¸º <code>podName.podspec</code> çš„æ–‡ä»¶ã€‚</p>

<p><a href="https://github.com/CocoaPods/Specs">CocoaPods Specs</a> æ˜¯çº¿ä¸Šç‰ˆï¼Œåœ¨æˆ‘ä»¬æœ¬åœ°ï¼Œå…¶å®ä¹Ÿæœ‰è¿™ä¸ªä»“åº“ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤å°±å¯ä»¥çœ‹åˆ°ï¼Œå…¶ä¸­ <code>master</code> å¯¹åº” CocoaPods å®˜æ–¹çš„ <code>Specs</code> ä»“åº“ã€‚
<code>
cd ~/.cocoapods/repos &amp;&amp; ls
</code></p>

<p>è€Œåœ¨æ­¤æ•™ç¨‹çš„ <code>Lego</code> ä»“åº“é‡Œï¼Œæœ‰ä¸€ä¸ªæ–‡ä»¶å¤¹ <a href="https://github.com/Limon-O-O/Lego/tree/master/Specs">Specs</a>ï¼Œæ­¤æ–‡ä»¶å¤¹é‡Œå­˜æ”¾ç€ <code>framework</code> å’Œæ¨¡å— Pod çš„ <code>podspec</code>ï¼Œç›¸å½“äº Private Spec Repo</p>

<blockquote><p>æ›´å¤šè¯¦æƒ…è¯·æŸ¥çœ‹å®˜æ–¹èµ„æ–™ï¼š<a href="https://guides.cocoapods.org/making/private-cocoapods.html">Private Pods</a></p></blockquote>

<p><br /></p>

<h2>äºŒã€å®æˆ˜</h2>

<h3>å®æˆ˜å‰å¤•</h3>

<ol>
<li><p>æ–°å»ºä¸€ä¸ªä»“åº“ï¼Œå°±å…ˆåä¸º <code>Lego</code>ï¼Œé¡µé¢å…ˆä¸æ€¥ç€å…³ï¼Œæ‰“å¼€ <code>Terminal</code></p></li>
<li><p><code>pod repo add [ç§æœ‰Podæºä»“åº“åå­—] [ç§æœ‰Podæºçš„repoåœ°å€]</code>ï¼Œæ·»åŠ ç§æœ‰æºåˆ°æœ¬åœ°</p></li>
<li><p>æŠŠåˆšåˆšæ–°å»ºçš„ä»“åº“ <code>clone</code> åˆ°æœ¬åœ°ï¼ŒæŠŠ <a href="https://github.com/Limon-O-O/Lego/tree/master/ConfigPrivatePod">ConfigPrivatePod</a> æ–‡ä»¶å¤¹æ”¾è¿›å»</p></li>
<li><p>åœ¨ <code>./ConfigPrivatePod/config.sh</code> æ–‡ä»¶é‡Œï¼Œå¡«å†™ <code>httpsRepo</code>, <code>sshRepo</code>, <code>specsRepo</code>, <code>homePage</code>, <code>author</code>, <code>email</code>ï¼Œ<a href="https://github.com/Limon-O-O/Lego/blob/master/ConfigPrivatePod/config.sh#L3">å…·ä½“å‚è€ƒ</a></p>

<blockquote><p>å½“ç„¶ï¼Œåœ¨è¿™é‡Œå¡«å†™è¿™4ä¸ªé»˜è®¤å‚æ•°çš„å‰ææ˜¯ï¼Œæƒ³æŠŠå…¨éƒ¨æ¨¡å—éƒ½æ”¾åœ¨åŒä¸€ä¸ª <code>ä»“åº“</code> é‡Œé¢ï¼Œå¦‚æœæ‰“ç®—ä¸€ä¸ªæ¨¡å—ä¸€ä¸ª <code>ä»“åº“</code>ï¼Œè¯·å‚è€ƒ Mr.Casa çš„<a href="http://casatwy.com/modulization_in_action.html">ã€Šåœ¨ç°æœ‰å·¥ç¨‹ä¸­å®æ–½åŸºäºCTMediatorçš„ç»„ä»¶åŒ–æ–¹æ¡ˆã€‹</a></p></blockquote></li>
<li><p>æ–°å»ºä¸‰ä¸ªæ–‡ä»¶å¤¹ <code>Frameworks</code> <code>Modules</code> <code>Specs</code>ï¼Œæœ€ç»ˆçš„ç»“æ„å¦‚ä¸‹ï¼š</p></li>
</ol>


<pre><code>Lego
â”œâ”€â”€ ConfigPrivatePod
â”‚Â Â  â”œâ”€â”€ config.sh
â”‚Â Â  â””â”€â”€ templates
â”‚Â Â  â””â”€â”€ pod-template
â”‚Â Â      ......
â”œâ”€â”€ Frameworks
â”œâ”€â”€ Modules
â””â”€â”€ Specs
</code></pre>

<p><br /></p>

<h3>æ–°å»ºä¸»æ¨¡å—å’Œ Door æ¨¡å—</h3>

<h5>ä¸»æ¨¡å— &mdash; Lego</h5>

<p>ä½¿ç”¨ Xcode åˆ›å»ºä¸€ä¸ªåä¸º <code>Lego</code> çš„å·¥ç¨‹ï¼Œæ”¾åœ¨ <code>Lego/Modules</code> ä¸‹ï¼Œæ­¤å·¥ç¨‹å°±æ˜¯æˆ‘ä»¬çš„ä¸»æ¨¡å—ã€‚</p>

<h5>Door æ¨¡å—</h5>

<p>è‹¥æƒ³æ–°å»ºä¸€ä¸ª Door æ¨¡å—ï¼Œéœ€è¦ä¸¤ä¸ª <code>Podåº“</code>ï¼Œ
1. Doorä¸šåŠ¡Pod
2. æ–¹ä¾¿å…¶å®ƒæ¨¡å—è°ƒç”¨ Doorä¸šåŠ¡ çš„ Mediator+Door çš„ Podã€‚</p>

<blockquote><p>è¿™é‡Œå¤šè§£é‡Šä¸€å¥ï¼šMediator+Door Pod æœ¬è´¨ä¸Šåªæ˜¯ä¸€ä¸ªæ–¹ä¾¿æ–¹æ³•ï¼Œå®ƒå¯¹ Door Pod ä¸å­˜åœ¨ä»»ä½•ä¾èµ–</p></blockquote>

<p>å¼€å§‹åˆ›å»ºï¼š</p>

<ol>
<li>åŒåˆ›å»ºä¸»æ¨¡å—ä¸€æ ·ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º <code>Door</code> çš„å·¥ç¨‹ï¼Œæ”¾åœ¨ <code>Lego/Modules</code> ä¸‹ï¼Œæ­¤æ¨¡å—ä¸»æ‰“<code>æ³¨å†Œç™»å½•</code>ã€‚</li>
<li>å†åˆ›å»ºä¸€ä¸ªåä¸º <code>Mediator+Door</code> çš„å·¥ç¨‹ï¼ŒåŒæ ·æ”¾åœ¨ <code>Lego/Modules</code> ä¸‹ï¼Œæ­¤å·¥ç¨‹ä¸»è¦ä¸ºäº†æ–¹ä¾¿å…¶å®ƒæ¨¡å—è°ƒç”¨ Doorä¸šåŠ¡ï¼Œæœ¬è´¨å°±æ˜¯é€šè¿‡ <code>Mediator</code> åˆ©ç”¨<code>è¿è¡Œæ—¶</code>ï¼Œæ‰¾åˆ°åœ¨ <code>Door</code> å†…ç›¸å¯¹åº”çš„æ–¹æ³•ã€‚</li>
<li><p>åœ¨ <code>ConfigPrivatePod</code> ä¸‹ï¼Œæ‰§è¡Œ <code>./config.sh</code>ï¼Œè„šæœ¬ä¼šé—®ä½ è¦ä¸€äº›ä¿¡æ¯ã€‚</p>

<p> é…ç½® <code>Door</code> å·¥ç¨‹ï¼š</p>

<pre><code class="`"> Enter Project Name: Door

 ================================================
  1 :  Module
 2 :  Extension
 3 :  Framework
 ================================================

 Enter Project Type Number: 1
</code></pre>

<p> é…ç½® <code>Mediator+Door</code> å·¥ç¨‹ï¼š</p>

<pre><code class="`"> Enter Project Name: Door // æ³¨ï¼šProject Name ä¹Ÿæ˜¯ Door

 ================================================
 1 :  Module
 2 :  Extension
 3 :  Framework
 ================================================

 Enter Project Type Number: 2
</code></pre>

<blockquote><p>è‹¥é…ç½®æ¨¡å—å·¥ç¨‹ï¼Œ<code>Project Type Number</code> è¾“å…¥ <code>1</code>ï¼Œè‹¥é…ç½® <code>æ¨¡å—Extension</code> å·¥ç¨‹ï¼Œè¾“å…¥ <code>2</code>ï¼Œè‹¥é…ç½®æ™®é€šçš„ <code>framework</code> è¾“å…¥ <code>3</code></p></blockquote>

<p> é…ç½®å®Œ <code>Door</code> å·¥ç¨‹åï¼Œåœ¨ <code>Modules/Door/Door</code> ä¸‹ï¼Œä¼šå¤šäº†ä¸€ä¸ªä¹ŸåŒæ ·åä¸º <code>Door</code> çš„æ–‡ä»¶å¤¹ï¼Œä»¥åæ‰€æœ‰éœ€è¦æ‰“åŒ…å‡ºå»ç»™åˆ«äººç”¨çš„éƒ½åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹ï¼Œå› ä¸ºåœ¨ <code>Door.podspec</code> æ–‡ä»¶å†…å®šä¹‰çš„æºæ–‡ä»¶å°±æŒ‡æŒ‡å®šäº†æ­¤æ–‡ä»¶å¤¹ã€‚</p></li>
<li><p>æ‰“å¼€ <code>Door.xcodeproj</code>ï¼ŒæŠŠ <code>Modules/Door/Door/Door</code> æ­¤æ–‡ä»¶å¤¹å·¥ç¨‹é‡Œé¢ã€‚ <code>Mediator+Door</code> å·¥ç¨‹åŒç†ã€‚</p>

<p> <code>Door</code> å·¥ç¨‹çš„ç›®å½•ç®€å¦‚ä¸‹ï¼š</p>

<pre><code class="`"> Door
 â”œâ”€â”€ Door
 â”‚Â Â  â””â”€â”€ Door
 â”‚Â Â      â”œâ”€â”€ WelcomeViewController.swift
 â”‚Â Â      â””â”€â”€ Targets
 â”‚Â   Â        â”œâ”€â”€ Target_Door.swift
 â”œâ”€â”€ Door.xcodeproj
</code></pre>

<p> <code>Mediator+Door</code> å·¥ç¨‹çš„ç›®å½•ç®€å¦‚ä¸‹ï¼š</p>

<pre><code class="`"> Mediator+Door
 â”œâ”€â”€ Mediator+Door
 â”‚Â Â  â””â”€â”€ Mediator+Door
 â”‚Â   Â    â”œâ”€â”€ Door.swift
 â”‚Â   Â    â”œâ”€â”€ Mediator+Door.swift
 â”œâ”€â”€ Mediator+Door.xcodeproj
</code></pre></li>
</ol>


<p>åˆ°æ­¤ï¼Œ<code>Dooræ¨¡å—</code> åŸºæœ¬é…ç½®å®Œæˆï¼Œå¯ä»¥å‰å¾€ <code>ä¸»æ¨¡å—Lego</code> å¼•å…¥å®ƒäº†ã€‚</p>

<p><br /></p>

<h3>åœ¨ä¸»æ¨¡å—ä½¿ç”¨ Door æ¨¡å—</h3>

<h5>åœ¨ä¸»æ¨¡å—å¼•å…¥ Door æ¨¡å—</h5>

<p><code>Modules/Lego/Podfile</code>:</p>

<pre><code>source 'https://github.com/Limon-O-O/Lego.git' # è¿™æ˜¯ Specs ä»“åº“çš„åœ°å€ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œå’Œé¡¹ç›®çš„ä»“åº“åœ°å€ä¸€è‡´
source 'https://github.com/CocoaPods/Specs.git'
platform :ios, '9.0'

target 'Lego' do
    use_frameworks!

    # Doorï¼Œåœ¨å¼€å‘åˆæœŸï¼Œå…ˆç”¨ç›¸å¯¹è·¯å¾„ï¼Œå› ä¸ºç°åœ¨ CocoaPods æ”¯æŒè·¨å·¥ç¨‹ä¿®æ”¹ï¼Œä¾¿äºå¼€å‘
    pod "Mediator+Door", :path =&gt; "../Mediator+Door"
    pod "Door", :path =&gt; "../Door"

    # Meï¼Œè‹¥æ¨¡å—å·²ç»å¼€å‘å¾—å·®ä¸å¤šäº†ï¼Œå¹¶ released äº†ï¼Œå¯ä» Private Spec æ‹‰å–
    pod "Mediator+Me"
    pod "Me", '~&gt; 1.0.1'
end
</code></pre>

<h3>å‘å¸ƒ Door æ¨¡å—</h3>

<p>åœ¨ <code>Modules/Door</code> ä¸‹ï¼Œæ•²å‘½ä»¤ <code>./release.sh</code>ï¼Œè„šæœ¬ä¼šé—®ä½ éœ€è¦å‘å¸ƒçš„ç‰ˆæœ¬å·ï¼Œä»…éœ€è¦è¾“å…¥ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œå…¶å®ƒçš„è„šæœ¬éƒ½å¸®ä½ åšå¥½äº†ã€‚</p>

<p>å‘å¸ƒæˆåŠŸä¹‹åï¼Œè¿˜éœ€è¦æ›´æ–° <code>Private Spec</code>ï¼Œå‘½ä»¤ï¼š<code>pod repo update [Name]</code>ï¼Œè¿™ä¸ª <code>[Name]</code> å°±æ˜¯ <code>ç§æœ‰Podæºçš„åå­—</code>ï¼Œåœ¨ä¸Šé¢æˆ‘ä»¬ç”¨å‘½ä»¤ <code>pod repo add [ç§æœ‰Podæºä»“åº“åå­—] [ç§æœ‰Podæºçš„repoåœ°å€]</code> æ·»åŠ äº†çš„ã€‚ä¹Ÿå¯ä»¥ <code>cd ~/.cocoapods/repos &amp;&amp; ls</code> æŸ¥çœ‹</p>

<p><code>release.sh</code> ä¸»è¦ä½œç”¨æœ‰ï¼š</p>

<ol>
<li>æ›´æ–° <code>Door.podspec</code></li>
<li>æ›´æ–° <code>README.md</code></li>
<li>æ›´æ–° <code>Info.plist</code> çš„ç‰ˆæœ¬å·</li>
<li>å¤åˆ¶ä¸€ä»½ <code>Door.podspec</code> åˆ° <code>Specs</code> æ–‡ä»¶å¤¹</li>
<li><code>git push</code> ç›¸å…³å˜åŠ¨åˆ°è¿œç¨‹ä»“åº“</li>
</ol>


<p><br /></p>

<h2>ä¸‰ã€å®è·µå¿ƒå¾—</h2>

<ol>
<li><p><code>Networking</code>ï¼Œåˆ†æ¨¡å—ã€‚å„ä¸ªæ¨¡å—çš„ APIï¼Œåˆ†åˆ«å†™åˆ°ç›¸å¯¹åº”çš„æ¨¡å—ï¼Œæ²¡æœ‰ä¸€ä¸ª <code>é›†çº¦å‹</code> çš„æ–‡ä»¶ã€‚</p></li>
<li><p><code>UserDefaults</code> åˆ†æ¨¡å—ï¼Œä¹Ÿç¨å¾®é¿å… <code>UserDefaults.standard</code> å­˜å‚¨å¤§é‡æ•°æ®ä¹‹åï¼Œå¯¼è‡´è¯»å†™æ…¢</p>

<pre><code class="`"> UserDefaults(suiteName: "top.limon.door")
 UserDefaults(suiteName: "top.limon.lego")
</code></pre>

<p> å¦‚æœæ¨¡å—ä¹‹é—´éœ€è¦ä¼ é€’ <code>UserDefaults</code> çš„å€¼ï¼Œé€šè¿‡ <code>Mediator</code> è°ƒåº¦ï¼Œä¸ç›´æ¥å…¬å¼€ <code>UserDefaults</code>ã€‚</p></li>
<li><p>é€šè¿‡ <code>Mediator</code> ä¼ é€’çš„ <code>Data</code> å¿…é¡»æ˜¯ <code>NSObject</code>ï¼Œä¸ç„¶å´©æºƒ</p>

<pre><code class="`"> extension Target_Door {

     func Action_DidLogin() -&gt; [String: Any] {
         return ["result": DoorUserDefaults.didLogin]
     }

     func Action_DidLogin() -&gt; Bool { // Bool ä¸æ˜¯ NSObjectï¼Œå´©æºƒ
         return true
     }
 }
</code></pre>

<p> ç„¶å¹¶åµï¼Œ<code>[String: Any]</code> ç†è®ºä¸Šæ˜¯ <code>AnyObject</code>ï¼Œä½†å´ä¸å´©æºƒï¼Œéš¾é“è‡ªåŠ¨è½¬æˆäº† <code>NSDictionary</code> ï¼Ÿ</p>

<p> å¦‚æœè¿”å› <code>Bool</code>ï¼Œå´©æºƒä¿¡æ¯ï¼š<code>unrecognized selector sent to instance</code>ï¼Œè‹¥æƒ³æ›´æ·±å…¥æ¢è®¨ï¼Œå¯è¿è¡Œ <a href="https://github.com/Limon-O-O/Mediator">Godé¡¹ç›®</a> è¿›è¡Œæµ‹è¯•</p></li>
<li><p>ä½¿ç”¨ <code>Mediator</code> è¿›è¡Œæ¨¡å—åŒ–ï¼Œé¿å…ä¸äº†<code>Hard Code</code>ï¼Œç‰¹åˆ«æ˜¯åœ¨æ¨¡å—ä¹‹é—´çš„é€šè®¯æ—¶ï¼Œå»ºè®® <code>Hard Code</code> å°½é‡å†™åœ¨ <code>Extension</code> å†…ï¼Œæ¯”å¦‚ <code>Mediator+Door.swift</code> çš„ <code>deliverParams</code> çš„ <code>navigationBarHidden</code>, <code>callbackAction</code></p>

<pre><code class="`"> extension Door where Base: Mediator {

     public func welcomeViewController(_ navigationBarHidden: Bool = true, _ callbackAction: @escaping (([String: Any]) -&gt; Void)) -&gt; UIViewController? {
         let deliverParams: [String: Any] = ["navigationBarHidden": navigationBarHidden, "callbackAction": callbackAction]
         return base.performTarget("Door", action: "WelcomeViewController", params: deliverParams) as? UIViewController
     }
 }
</code></pre></li>
<li><p>ä½¿ç”¨ <code>Storyboard Reference</code> è¿æ¥å…¶å®ƒæ¨¡å—çš„ <code>Storyboard</code>ï¼Œæ³¨æ„ <code>Bundle</code> çš„å¡«å†™</p>

<p> <img src="https://ww4.sinaimg.cn/large/006tNbRwly1fd7jvecf8cj30e805mq3g.jpg" width="420"></p></li>
<li><p>ä½¿ç”¨ <code>Protocol</code> + <code>Extension</code> æ›´å¥½åœ°åŒºåˆ†ä½œç”¨åŸŸï¼Œ<code>Mediator.shared.door.accessToken()</code>ï¼Œå…¶ä¸­çš„ <code>door</code> æ˜¯ä¸æ˜¯æŒºå¥½çœ‹çš„ ğŸŒï¼Œè€Œä¸æ˜¯ <code>Mediator.shared.door_accessToken()</code></p></li>
<li><p>å…³äºè„šæœ¬åˆ›å»º Xcode å·¥ç¨‹ï¼Œä½¿ç”¨çš„æ˜¯ <code>CocoaPods</code> çš„ <a href="https://github.com/CocoaPods/pod-template">pod-template</a>ï¼Œå¦å¤–ä¹Ÿå¯ä»¥ä½¿ç”¨ <a href="https://github.com/CocoaPods/Xcodeproj">Xcodeproj</a> æˆ– <a href="https://github.com/thoughtbot/liftoff">liftoff</a></p>

<blockquote><p>æ³¨ï¼šå¹³æ—¶ç”¨ <code>pod lib create NAME</code> åˆ›å»º <code>pod</code>ï¼Œå°±æ˜¯æ‹‰å– <a href="https://github.com/CocoaPods/pod-template">pod-template</a> æ¥åˆ›å»º Xcode å·¥ç¨‹</p></blockquote>

<pre><code class="`"> pod lib create TestPod 
 Cloning `https://github.com/CocoaPods/pod-template.git` into `TestPod`.
 Configuring TestPod template.
</code></pre></li>
</ol>

]]></content>
  </entry>
  
</feed>
