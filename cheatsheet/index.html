
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>CheatSheet - Limon&#8217;s Blog</title>
	<meta name="author" content="Limon">

	
	<meta name="description" content="CheatSheet cheatsheet Dec 23rd, 2015 4:22 am Swift Either enum enum Either&lt;A, B&gt;{ case Left(A) case Right(B)
} let x: Either&lt;SomeType, &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Limon's Blog" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.ico?v=1" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="/javascripts/jquery-1.7.2.min.js"></script>
	
</head>


<body data-page=/cheatsheet/>
	<header id="header" class="inner"><h1><a href="/">Limon&#8217;s Blog</a></h1>



</header>

	<div id="content" class="inner"><article class="post">
	
	<h2 class="title">CheatSheet</h2>

	

	<div class="entry-content">
		<div class="meta_custom">
		
			<div class="tags">


	<a class='category' href='/blog/categories/cheatsheet/'>cheatsheet</a>


</div>
			




<time class='entry-date' datetime='2015-12-23T04:22:06+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>23</span><span class='date-suffix'>rd</span>, <span class='date-year'>2015</span></span> <span class='time'>4:22 am</span></time>

		</div>
		
		<h4>Swift Either enum</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">enum</span> <span class="n">Either</span><span class="o">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="o">&gt;</span><span class="p">{</span>
</span><span class='line'>  <span class="k">case</span> <span class="n">Left</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
</span><span class='line'>  <span class="k">case</span> <span class="n">Right</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="nl">x</span><span class="p">:</span> <span class="n">Either</span><span class="o">&lt;</span><span class="n">SomeType</span><span class="p">,</span> <span class="n">AnotherType</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">...</span>
</span><span class='line'>
</span><span class='line'><span class="k">switch</span> <span class="n">x</span> <span class="p">{</span>
</span><span class='line'><span class="k">case</span> <span class="p">.</span><span class="n">Left</span><span class="p">(</span><span class="k">let</span> <span class="n">someTypeValue</span><span class="p">)</span><span class="o">:</span>
</span><span class='line'>  <span class="c1">// do something with someTypeValue</span>
</span><span class='line'><span class="k">case</span> <span class="p">.</span><span class="n">Right</span><span class="p">(</span><span class="k">let</span> <span class="n">anotherTypeValue</span><span class="p">)</span><span class="o">:</span>
</span><span class='line'>  <span class="c1">// do something with anotherTypeValue</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>一个数据源，两种类型</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="nl">data</span><span class="p">:</span> <span class="n">Either</span><span class="o">&lt;</span><span class="n">CellModel</span><span class="p">,</span> <span class="n">BannerModel</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">...</span>
</span><span class='line'>
</span><span class='line'><span class="k">func</span> <span class="n">tableView</span><span class="p">(</span><span class="n">_</span> <span class="nl">tableView</span><span class="p">:</span> <span class="bp">UITableView</span><span class="p">,</span> <span class="n">numberOfRowsInSection</span> <span class="nl">section</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Int</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="n">data</span><span class="p">.</span><span class="n">count</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">func</span> <span class="n">tableView</span><span class="p">(</span><span class="n">_</span> <span class="nl">tableView</span><span class="p">:</span> <span class="bp">UITableView</span><span class="p">,</span> <span class="n">cellForRowAt</span> <span class="nl">indexPath</span><span class="p">:</span> <span class="n">IndexPath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">UITableViewCell</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">let</span> <span class="n">item</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">indexPath</span><span class="p">.</span><span class="n">row</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">let</span> <span class="n">cell</span> <span class="o">=</span> <span class="n">tableView</span><span class="p">.</span><span class="n">dequeueReusableCell</span><span class="p">(</span><span class="nl">withIdentifier</span><span class="p">:</span> <span class="n">identifier</span><span class="p">,</span> <span class="k">for</span><span class="o">:</span> <span class="n">indexPath</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">switch</span> <span class="n">item</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">case</span> <span class="p">.</span><span class="n">Left</span><span class="p">(</span><span class="k">let</span> <span class="n">pizza</span><span class="p">)</span><span class="o">:</span>
</span><span class='line'>        <span class="n">configure</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="nl">with</span><span class="p">:</span> <span class="n">pizza</span><span class="p">)</span>
</span><span class='line'>    <span class="k">case</span> <span class="p">.</span><span class="n">Right</span><span class="p">(</span><span class="k">let</span> <span class="n">ad</span><span class="p">)</span><span class="o">:</span>
</span><span class='line'>        <span class="n">configure</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="nl">with</span><span class="p">:</span> <span class="n">ad</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">cell</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Swift 几种不错的遍历</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mf">1.</span><span class="p">.</span><span class="mf">.10</span> <span class="k">where</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">print</span><span class="p">(</span><span class="s">&quot;\(i) is even&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">for</span> <span class="n">word</span> <span class="k">in</span> <span class="p">[</span><span class="s">&quot;Lorem&quot;</span><span class="p">,</span> <span class="s">&quot;ipsum&quot;</span><span class="p">,</span> <span class="s">&quot;dolor&quot;</span><span class="p">,</span> <span class="s">&quot;sit&quot;</span><span class="p">,</span> <span class="s">&quot;amet&quot;</span><span class="p">,</span> <span class="s">&quot;consectetur&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&quot;adipiscing&quot;</span><span class="p">,</span> <span class="s">&quot;elit&quot;</span><span class="p">]</span> <span class="k">where</span> <span class="n">word</span><span class="p">.</span><span class="n">characters</span><span class="p">.</span><span class="n">count</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="p">{</span>
</span><span class='line'>     <span class="n">print</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="s">&quot;is a long word&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="nl">items</span><span class="p">:</span> <span class="p">[</span><span class="n">String</span><span class="o">?</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">nil</span><span class="p">,</span> <span class="nb">nil</span><span class="p">,</span> <span class="s">&quot;Hello&quot;</span><span class="p">,</span> <span class="nb">nil</span><span class="p">,</span> <span class="s">&quot;World&quot;</span><span class="p">]</span>
</span><span class='line'><span class="k">for</span> <span class="k">case</span> <span class="k">let</span> <span class="n">item</span><span class="o">?</span> <span class="k">in</span> <span class="n">items</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="n">mySwitch</span> <span class="o">=</span> <span class="bp">UISwitch</span><span class="p">()</span>
</span><span class='line'><span class="k">let</span> <span class="n">myView</span> <span class="o">=</span> <span class="bp">UIView</span><span class="p">()</span>
</span><span class='line'><span class="k">let</span> <span class="n">myDate</span> <span class="o">=</span> <span class="bp">NSDate</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="nl">myItems</span><span class="p">:</span> <span class="p">[</span><span class="bp">NSObject</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">mySwitch</span><span class="p">,</span> <span class="n">myDate</span><span class="p">,</span> <span class="n">myView</span><span class="p">]</span>
</span><span class='line'><span class="k">for</span> <span class="k">case</span> <span class="k">let</span> <span class="n">item</span> <span class="kt">as</span> <span class="bp">UIView</span> <span class="k">in</span> <span class="n">myItems</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">print</span><span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">frame</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">protocol</span> <span class="n">MyCustomProtocol</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">var</span> <span class="nl">frame</span><span class="p">:</span> <span class="bp">CGRect</span> <span class="p">{</span><span class="kr">get</span><span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">struct</span> <span class="n">Bar</span> <span class="p">{}</span>
</span><span class='line'><span class="k">struct</span> <span class="nl">Foo</span><span class="p">:</span> <span class="n">MyCustomProtocol</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">let</span> <span class="nl">frame</span><span class="p">:</span> <span class="bp">CGRect</span> <span class="o">=</span> <span class="p">.</span><span class="n">zero</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="k">extension</span> <span class="nl">UIView</span><span class="p">:</span> <span class="n">MyCustomProtocol</span> <span class="p">{}</span>
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="n">otherItems</span> <span class="o">=</span> <span class="p">[</span><span class="n">Bar</span><span class="p">(),</span> <span class="n">Foo</span><span class="p">(),</span> <span class="bp">UIView</span><span class="p">()]</span> <span class="kt">as</span> <span class="p">[</span><span class="n">Any</span><span class="p">]</span>
</span><span class='line'><span class="k">for</span> <span class="k">case</span> <span class="k">let</span> <span class="n">item</span> <span class="kt">as</span> <span class="n">MyCustomProtocol</span> <span class="k">in</span> <span class="n">otherItems</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">print</span><span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">frame</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><br /></p>

<h4>字典合并</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">var</span> <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span>
</span><span class='line'>    <span class="s">&quot;page&quot;</span><span class="o">:</span> <span class="s">&quot;1&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&quot;offset&quot;</span><span class="o">:</span> <span class="s">&quot;20&quot;</span>
</span><span class='line'><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;type&quot;</span><span class="o">:</span> <span class="s">&quot;news&quot;</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="n">parameters</span><span class="p">.</span><span class="n">ifr_merge</span><span class="p">(</span><span class="n">params</span><span class="p">)</span> <span class="c1">// Output: [&quot;offset&quot;: &quot;20&quot;, &quot;type&quot;: &quot;news&quot;, &quot;page&quot;: &quot;1&quot;]</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">extension</span> <span class="n">Dictionary</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="kr">mutating</span> <span class="k">func</span> <span class="n">ifr_merge</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span> <span class="n">V</span><span class="o">&gt;</span><span class="p">(</span><span class="nl">dictionaries</span><span class="p">:</span> <span class="n">Dictionary</span><span class="o">&lt;</span><span class="n">K</span><span class="p">,</span> <span class="n">V</span><span class="o">&gt;</span><span class="p">...)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">for</span> <span class="n">dict</span> <span class="k">in</span> <span class="n">dictionaries</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">for</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="k">in</span> <span class="n">dict</span> <span class="p">{</span>
</span><span class='line'>                <span class="k">if</span> <span class="k">let</span> <span class="n">v</span> <span class="o">=</span> <span class="n">value</span> <span class="kt">as</span><span class="o">?</span> <span class="n">Value</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="n">key</span> <span class="kt">as</span><span class="o">?</span> <span class="n">Key</span> <span class="p">{</span>
</span><span class='line'>                    <span class="nb">self</span><span class="p">.</span><span class="n">updateValue</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nl">forKey</span><span class="p">:</span> <span class="n">k</span><span class="p">)</span>
</span><span class='line'>                <span class="p">}</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><br /></p>

<h4>优化 Cell 的使用体验</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">collectionView</span><span class="p">.</span><span class="n">registerNib</span><span class="p">(</span><span class="bp">UINib</span><span class="p">(</span><span class="nl">nibName</span><span class="p">:</span> <span class="n">NewsCell</span><span class="p">.</span><span class="n">ifr_className</span><span class="p">,</span> <span class="nl">bundle</span><span class="p">:</span> <span class="nb">nil</span><span class="p">),</span> <span class="nl">forCellWithReuseIdentifier</span><span class="p">:</span> <span class="n">NewsCell</span><span class="p">.</span><span class="n">ifr_className</span><span class="p">)</span>
</span><span class='line'><span class="k">let</span> <span class="n">cell</span> <span class="o">=</span> <span class="n">collectionView</span><span class="p">.</span><span class="n">dequeueReusableCellWithReuseIdentifier</span><span class="p">(</span><span class="n">NewsCell</span><span class="p">.</span><span class="n">ifr_className</span><span class="p">,</span> <span class="nl">forIndexPath</span><span class="p">:</span> <span class="n">indexPath</span><span class="p">)</span> <span class="kt">as</span><span class="o">!</span> <span class="n">NewsCell</span>
</span><span class='line'>
</span><span class='line'><span class="k">extension</span> <span class="bp">UICollectionReusableView</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">static</span> <span class="k">var</span> <span class="nl">ifr_className</span><span class="p">:</span> <span class="n">String</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="s">&quot;\(self)&quot;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><br /></p>

<h4>优化 ReloadData、Insert 的使用体验</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">var</span> <span class="nl">wayToUpdate</span><span class="p">:</span> <span class="bp">UICollectionView</span><span class="p">.</span><span class="n">WayToUpdate</span> <span class="o">=</span> <span class="p">.</span><span class="n">None</span>
</span><span class='line'><span class="n">wayToUpdate</span> <span class="o">=</span> <span class="n">page</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">?</span> <span class="p">.</span><span class="nl">ReloadData</span> <span class="p">:</span> <span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="n">indexPaths</span><span class="p">)</span>
</span><span class='line'><span class="n">wayToUpdate</span><span class="p">.</span><span class="n">performWithCollectionView</span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">collectionView</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">extension</span> <span class="bp">UICollectionView</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">enum</span> <span class="n">WayToUpdate</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">case</span> <span class="n">None</span>
</span><span class='line'>        <span class="k">case</span> <span class="n">ReloadData</span>
</span><span class='line'>        <span class="k">case</span> <span class="n">Insert</span><span class="p">([</span><span class="bp">NSIndexPath</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">var</span> <span class="nl">needsLabor</span><span class="p">:</span> <span class="n">Bool</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">switch</span> <span class="nb">self</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">case</span> <span class="p">.</span><span class="nl">None</span><span class="p">:</span>
</span><span class='line'>                <span class="k">return</span> <span class="nb">false</span>
</span><span class='line'>            <span class="k">case</span> <span class="p">.</span><span class="nl">ReloadData</span><span class="p">:</span>
</span><span class='line'>                <span class="k">return</span> <span class="nb">true</span>
</span><span class='line'>            <span class="k">case</span> <span class="p">.</span><span class="nl">Insert</span><span class="p">:</span>
</span><span class='line'>                <span class="k">return</span> <span class="nb">true</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">func</span> <span class="n">performWithCollectionView</span><span class="p">(</span><span class="nl">collectionView</span><span class="p">:</span> <span class="bp">UICollectionView</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">switch</span> <span class="nb">self</span> <span class="p">{</span>
</span><span class='line'>                <span class="k">case</span> <span class="p">.</span><span class="nl">None</span><span class="p">:</span>
</span><span class='line'>                    <span class="k">break</span>
</span><span class='line'>                <span class="k">case</span> <span class="p">.</span><span class="nl">ReloadData</span><span class="p">:</span>
</span><span class='line'>                    <span class="n">collectionView</span><span class="p">.</span><span class="n">reloadData</span><span class="p">()</span>
</span><span class='line'>                <span class="k">case</span> <span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="k">let</span> <span class="n">indexPaths</span><span class="p">)</span><span class="o">:</span>
</span><span class='line'>                    <span class="n">collectionView</span><span class="p">.</span><span class="n">insertItemsAtIndexPaths</span><span class="p">(</span><span class="n">indexPaths</span><span class="p">)</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><br /></p>

<h4>字体的适配</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="bp">UIFont</span><span class="p">.</span><span class="n">ifr_adaptiveFont</span><span class="p">(.</span><span class="n">Regular</span><span class="p">(</span><span class="nl">fontSize</span><span class="p">:</span> <span class="mf">16.0</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">enum</span> <span class="n">FontWeight</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">case</span> <span class="n">Light</span><span class="p">(</span><span class="nl">fontSize</span><span class="p">:</span> <span class="n">CGFloat</span><span class="p">)</span>
</span><span class='line'>    <span class="k">case</span> <span class="n">Regular</span><span class="p">(</span><span class="nl">fontSize</span><span class="p">:</span> <span class="n">CGFloat</span><span class="p">)</span>
</span><span class='line'>    <span class="k">case</span> <span class="n">Medium</span><span class="p">(</span><span class="nl">fontSize</span><span class="p">:</span> <span class="n">CGFloat</span><span class="p">)</span>
</span><span class='line'>    <span class="k">case</span> <span class="n">Bold</span><span class="p">(</span><span class="nl">fontSize</span><span class="p">:</span> <span class="n">CGFloat</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">extension</span> <span class="bp">UIFont</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">class</span> <span class="k">func</span> <span class="n">ifr_adaptiveFont</span><span class="p">(</span><span class="nl">weight</span><span class="p">:</span> <span class="n">FontWeight</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">UIFont</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">var</span> <span class="n">weightString</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
</span><span class='line'>        <span class="k">var</span> <span class="nl">size</span><span class="p">:</span> <span class="n">CGFloat</span> <span class="o">=</span> <span class="mf">16.0</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">switch</span> <span class="n">weight</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">case</span> <span class="p">.</span><span class="n">Light</span><span class="p">(</span><span class="k">let</span> <span class="n">fontSize</span><span class="p">)</span><span class="o">:</span>
</span><span class='line'>                <span class="n">weightString</span> <span class="o">=</span> <span class="s">&quot;-Light&quot;</span>
</span><span class='line'>                <span class="n">size</span> <span class="o">=</span> <span class="n">fontSize</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">case</span> <span class="p">.</span><span class="n">Regular</span><span class="p">(</span><span class="k">let</span> <span class="n">fontSize</span><span class="p">)</span><span class="o">:</span>
</span><span class='line'>                <span class="n">weightString</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
</span><span class='line'>                <span class="n">size</span> <span class="o">=</span> <span class="n">fontSize</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">case</span> <span class="p">.</span><span class="n">Medium</span><span class="p">(</span><span class="k">let</span> <span class="n">fontSize</span><span class="p">)</span><span class="o">:</span>
</span><span class='line'>                <span class="n">weightString</span> <span class="o">=</span> <span class="s">&quot;-Medium&quot;</span>
</span><span class='line'>                <span class="n">size</span> <span class="o">=</span> <span class="n">fontSize</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">case</span> <span class="p">.</span><span class="n">Bold</span><span class="p">(</span><span class="k">let</span> <span class="n">fontSize</span><span class="p">)</span><span class="o">:</span>
</span><span class='line'>                <span class="n">weightString</span> <span class="o">=</span> <span class="s">&quot;-Bold&quot;</span>
</span><span class='line'>                <span class="n">size</span> <span class="o">=</span> <span class="n">fontSize</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">guard</span> <span class="k">let</span> <span class="n">systemFont</span> <span class="o">=</span> <span class="bp">UIFont</span><span class="p">(</span><span class="nl">name</span><span class="p">:</span> <span class="s">&quot;PingFangSC\(weightString)&quot;</span><span class="p">,</span> <span class="nl">size</span><span class="p">:</span> <span class="n">size</span><span class="p">)</span> <span class="o">??</span>
</span><span class='line'>            <span class="bp">UIFont</span><span class="p">(</span><span class="nl">name</span><span class="p">:</span> <span class="s">&quot;STHeitiSC\(weightString)&quot;</span><span class="p">,</span> <span class="nl">size</span><span class="p">:</span> <span class="n">size</span><span class="p">)</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>                <span class="k">return</span> <span class="bp">UIFont</span><span class="p">.</span><span class="n">systemFontOfSize</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span> <span class="n">systemFont</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><br /></p>

<h4>HTML 字符转义</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">var</span> <span class="nl">ifr_htmlEntityDecode</span><span class="p">:</span> <span class="n">String</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">var</span> <span class="n">text</span> <span class="o">=</span> <span class="n">stringByReplacingOccurrencesOfString</span><span class="p">(</span><span class="s">&quot;&amp;quot;&quot;</span><span class="p">,</span> <span class="nl">withString</span><span class="p">:</span> <span class="s">&quot;</span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">.</span><span class="n">stringByReplacingOccurrencesOfString</span><span class="p">(</span><span class="s">&quot;&amp;apos;&quot;</span><span class="p">,</span> <span class="nl">withString</span><span class="p">:</span> <span class="s">&quot;&#39;&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">.</span><span class="n">stringByReplacingOccurrencesOfString</span><span class="p">(</span><span class="s">&quot;&amp;lt;&quot;</span><span class="p">,</span> <span class="nl">withString</span><span class="p">:</span> <span class="s">&quot;&lt;&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">.</span><span class="n">stringByReplacingOccurrencesOfString</span><span class="p">(</span><span class="s">&quot;&amp;gt;&quot;</span><span class="p">,</span> <span class="nl">withString</span><span class="p">:</span> <span class="s">&quot;&gt;&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="p">.</span><span class="n">stringByReplacingOccurrencesOfString</span><span class="p">(</span><span class="s">&quot;&amp;amp;&quot;</span><span class="p">,</span> <span class="nl">withString</span><span class="p">:</span> <span class="s">&quot;&amp;&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">text</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><br /></p>

<h4>repeat 一张小图片</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">patternImage</span> <span class="o">=</span> <span class="bp">UIImage</span><span class="p">(</span><span class="nl">named</span><span class="p">:</span> <span class="s">&quot;comment_bottomLine&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">bottomImageView</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="nb">nil</span>
</span><span class='line'><span class="n">bottomImageView</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="bp">UIColor</span><span class="p">(</span><span class="nl">patternImage</span><span class="p">:</span> <span class="n">patternImage</span><span class="o">!</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><br /></p>

<h4>NSURL 解析</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">extension</span> <span class="bp">NSURL</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">var</span> <span class="nl">prt_URLItems</span><span class="p">:</span> <span class="p">[</span><span class="nl">String</span><span class="p">:</span> <span class="n">String</span><span class="p">]</span><span class="o">?</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">let</span> <span class="n">components</span> <span class="o">=</span> <span class="bp">NSURLComponents</span><span class="p">(</span><span class="nl">URL</span><span class="p">:</span> <span class="nb">self</span><span class="p">,</span> <span class="nl">resolvingAgainstBaseURL</span><span class="p">:</span> <span class="nb">false</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">guard</span> <span class="k">let</span> <span class="n">items</span> <span class="o">=</span> <span class="n">components</span><span class="o">?</span><span class="p">.</span><span class="n">queryItems</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">return</span> <span class="nb">nil</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">var</span> <span class="n">infos</span> <span class="o">=</span> <span class="p">[</span><span class="nl">String</span><span class="p">:</span> <span class="n">String</span><span class="p">]()</span>
</span><span class='line'>        <span class="n">items</span><span class="p">.</span><span class="n">forEach</span> <span class="p">{</span>
</span><span class='line'>            <span class="n">infos</span><span class="p">[</span><span class="err">$</span><span class="mf">0.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="err">$</span><span class="mf">0.</span><span class="n">value</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">infos</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">items</span> <span class="o">=</span> <span class="bp">NSURL</span><span class="p">(</span><span class="nl">string</span><span class="p">:</span> <span class="s">&quot;http://www.weibo.com/1783821582/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo&quot;</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="n">prt_URLItems</span>
</span><span class='line'><span class="n">print</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Optional([&quot;mod&quot;: &quot;personinfo&quot;, &quot;rightmod&quot;: &quot;1&quot;, &quot;wvr&quot;: &quot;6&quot;])</span>
</span></code></pre></td></tr></table></div></figure>


<p><br /></p>

<h4>获取版本号和 Build 号</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="bp">NSBundle</span><span class="p">.</span><span class="n">mainBundle</span><span class="p">().</span><span class="n">infoDictionary</span><span class="o">?</span><span class="p">[</span><span class="s">&quot;CFBundleVersion&quot;</span><span class="p">]</span> <span class="kt">as</span><span class="o">?</span> <span class="n">String</span> <span class="c1">// Build</span>
</span><span class='line'><span class="bp">NSBundle</span><span class="p">.</span><span class="n">mainBundle</span><span class="p">().</span><span class="n">infoDictionary</span><span class="o">?</span><span class="p">[</span><span class="s">&quot;CFBundleShortVersionString&quot;</span><span class="p">]</span> <span class="kt">as</span><span class="o">?</span> <span class="n">String</span> <span class="c1">// 版本号</span>
</span></code></pre></td></tr></table></div></figure>


<p><br /></p>

<h4>判断一个 view 是否是另一个 view 的子视图</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">isDescendantOfView:</span><span class="p">(</span><span class="bp">UIView</span> <span class="o">*</span><span class="p">)</span><span class="nv">view</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p><br /></p>

<h4>隐藏或显示&#8221;隐藏文件&#8221;</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">defaults</span> <span class="n">write</span> <span class="n">com</span><span class="p">.</span><span class="n">apple</span><span class="p">.</span><span class="n">finder</span> <span class="n">AppleShowAllFiles</span> <span class="o">-</span><span class="n">boolean</span> <span class="nb">true</span><span class="p">;</span> <span class="n">killall</span> <span class="n">Finder</span>
</span></code></pre></td></tr></table></div></figure>


<p><br /></p>

<h4>设置圆角（左上角，右上角）</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="bp">UIBezierPath</span><span class="p">(</span><span class="nl">roundedRect</span><span class="p">:</span> <span class="n">ScreenBounds</span><span class="p">,</span> <span class="nl">byRoundingCorners</span><span class="p">:</span> <span class="p">[.</span><span class="n">TopLeft</span><span class="p">,</span> <span class="p">.</span><span class="n">TopRight</span><span class="p">],</span> <span class="nl">cornerRadii</span><span class="p">:</span> <span class="bp">CGSize</span><span class="p">(</span><span class="nl">width</span><span class="p">:</span> <span class="n">cornerRadius</span><span class="p">,</span> <span class="nl">height</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p><br /></p>

<h4>阴影</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">whiteView</span><span class="p">.</span><span class="n">layer</span><span class="p">.</span><span class="n">shadowColor</span> <span class="o">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">redColor</span><span class="p">().</span><span class="bp">CGColor</span>
</span><span class='line'><span class="n">whiteView</span><span class="p">.</span><span class="n">layer</span><span class="p">.</span><span class="n">shadowOffset</span> <span class="o">=</span> <span class="n">CGSizeMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'><span class="n">whiteView</span><span class="p">.</span><span class="n">layer</span><span class="p">.</span><span class="n">shadowOpacity</span> <span class="o">=</span> <span class="mf">1.0</span>
</span><span class='line'><span class="n">whiteView</span><span class="p">.</span><span class="n">layer</span><span class="p">.</span><span class="n">shadowRadius</span> <span class="o">=</span> <span class="mf">20.0</span>
</span><span class='line'><span class="n">whiteView</span><span class="p">.</span><span class="n">layer</span><span class="p">.</span><span class="n">shadowPath</span> <span class="o">=</span> <span class="bp">UIBezierPath</span><span class="p">(</span><span class="nl">rect</span><span class="p">:</span> <span class="n">whiteView</span><span class="p">.</span><span class="n">bounds</span><span class="p">).</span><span class="bp">CGPath</span>
</span></code></pre></td></tr></table></div></figure>


<p><br /></p>

<h4>BasicAnimation</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">pathAnimation</span> <span class="o">=</span> <span class="bp">CABasicAnimation</span><span class="p">(</span><span class="nl">keyPath</span><span class="p">:</span> <span class="s">&quot;path&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">pathAnimation</span><span class="p">.</span><span class="n">fromValue</span> <span class="o">=</span> <span class="n">startPath</span>
</span><span class='line'><span class="n">pathAnimation</span><span class="p">.</span><span class="n">toValue</span> <span class="o">=</span> <span class="n">endPath</span>
</span><span class='line'><span class="n">pathAnimation</span><span class="p">.</span><span class="n">duration</span> <span class="o">=</span> <span class="mf">0.3</span>
</span><span class='line'><span class="n">pathAnimation</span><span class="p">.</span><span class="n">timingFunction</span> <span class="o">=</span> <span class="bp">CAMediaTimingFunction</span><span class="p">(</span><span class="nl">name</span><span class="p">:</span> <span class="n">kCAMediaTimingFunctionEaseOut</span><span class="p">)</span> <span class="c1">// animation curve is Ease Out</span>
</span><span class='line'><span class="n">pathAnimation</span><span class="p">.</span><span class="n">fillMode</span> <span class="o">=</span> <span class="n">kCAFillModeBoth</span> <span class="c1">// keep to value after finishing</span>
</span><span class='line'><span class="n">pathAnimation</span><span class="p">.</span><span class="n">removedOnCompletion</span> <span class="o">=</span> <span class="nb">false</span> <span class="c1">// don&#39;t remove after finishing</span>
</span><span class='line'>
</span><span class='line'><span class="n">shapeLayer</span><span class="p">.</span><span class="n">addAnimation</span><span class="p">(</span><span class="n">pathAnimation</span><span class="p">,</span> <span class="nl">forKey</span><span class="p">:</span> <span class="n">pathAnimation</span><span class="p">.</span><span class="n">keyPath</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<blockquote><p><a href="http://jamesonquave.com/blog/fun-with-cashapelayer/">Fun with CAShapeLayer</a></p></blockquote>

<p><br /></p>

<h4>禁止 <code>WKWebView</code> 长按复制</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">source</span> <span class="o">=</span> <span class="s">&quot;var style = document.createElement(&#39;style&#39;); style.type = &#39;text/css&#39;; style.innerText = &#39;*:not(input):not(textarea) { -webkit-user-select: none; -webkit-touch-callout: none; }&#39;; var head = document.getElementsByTagName(&#39;head&#39;)[0]; head.appendChild(style);&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="nl">script</span><span class="p">:</span> <span class="n">WKUserScript</span> <span class="o">=</span> <span class="n">WKUserScript</span><span class="p">(</span><span class="nl">source</span><span class="p">:</span> <span class="n">source</span> <span class="kt">as</span> <span class="n">String</span><span class="p">,</span> <span class="nl">injectionTime</span><span class="p">:</span> <span class="p">.</span><span class="n">AtDocumentEnd</span><span class="p">,</span> <span class="nl">forMainFrameOnly</span><span class="p">:</span> <span class="nb">true</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Create the user content controller and add the script to it</span>
</span><span class='line'><span class="k">let</span> <span class="nl">userContentController</span><span class="p">:</span> <span class="n">WKUserContentController</span> <span class="o">=</span> <span class="n">WKUserContentController</span><span class="p">()</span>
</span><span class='line'><span class="n">userContentController</span><span class="p">.</span><span class="n">addUserScript</span><span class="p">(</span><span class="n">script</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Create the configuration with the user content controller</span>
</span><span class='line'><span class="k">let</span> <span class="nl">configuration</span><span class="p">:</span> <span class="n">WKWebViewConfiguration</span> <span class="o">=</span> <span class="n">WKWebViewConfiguration</span><span class="p">()</span>
</span><span class='line'><span class="n">configuration</span><span class="p">.</span><span class="n">userContentController</span> <span class="o">=</span> <span class="n">userContentController</span>
</span></code></pre></td></tr></table></div></figure>


<p><br /></p>

<h4>禁止 <code>WKWebView</code> 放大缩小</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// Javascript that disables pinch-to-zoom by inserting the HTML viewport meta tag into &lt;head&gt;</span>
</span><span class='line'><span class="k">let</span> <span class="nl">source</span><span class="p">:</span> <span class="bp">NSString</span> <span class="o">=</span> <span class="s">&quot;var meta = document.createElement(&#39;meta&#39;);&quot;</span> <span class="o">+</span>
</span><span class='line'>    <span class="s">&quot;meta.name = &#39;viewport&#39;;&quot;</span> <span class="o">+</span>
</span><span class='line'>    <span class="s">&quot;meta.content = &#39;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no&#39;;&quot;</span> <span class="o">+</span>
</span><span class='line'>    <span class="s">&quot;var head = document.getElementsByTagName(&#39;head&#39;)[0];&quot;</span> <span class="o">+</span>
</span><span class='line'><span class="s">&quot;head.appendChild(meta);&quot;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="nl">script</span><span class="p">:</span> <span class="n">WKUserScript</span> <span class="o">=</span> <span class="n">WKUserScript</span><span class="p">(</span><span class="nl">source</span><span class="p">:</span> <span class="n">source</span> <span class="kt">as</span> <span class="n">String</span><span class="p">,</span> <span class="nl">injectionTime</span><span class="p">:</span> <span class="p">.</span><span class="n">AtDocumentEnd</span><span class="p">,</span> <span class="nl">forMainFrameOnly</span><span class="p">:</span> <span class="nb">true</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Create the user content controller and add the script to it</span>
</span><span class='line'><span class="k">let</span> <span class="nl">userContentController</span><span class="p">:</span> <span class="n">WKUserContentController</span> <span class="o">=</span> <span class="n">WKUserContentController</span><span class="p">()</span>
</span><span class='line'><span class="n">userContentController</span><span class="p">.</span><span class="n">addUserScript</span><span class="p">(</span><span class="n">script</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Create the configuration with the user content controller</span>
</span><span class='line'><span class="k">let</span> <span class="nl">configuration</span><span class="p">:</span> <span class="n">WKWebViewConfiguration</span> <span class="o">=</span> <span class="n">WKWebViewConfiguration</span><span class="p">()</span>
</span><span class='line'><span class="n">configuration</span><span class="p">.</span><span class="n">userContentController</span> <span class="o">=</span> <span class="n">userContentController</span>
</span></code></pre></td></tr></table></div></figure>


<p><br /></p>

<h4>根据触摸点判断是否 touch 点击了某个 view</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="kr">override</span> <span class="k">func</span> <span class="nf">touchesBegan</span><span class="p">(</span><span class="nl">touches</span><span class="p">:</span> <span class="n">Set</span><span class="o">&lt;</span><span class="bp">NSObject</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">withEvent</span> <span class="nl">event</span><span class="p">:</span> <span class="bp">UIEvent</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nb">super</span><span class="p">.</span><span class="n">touchesBegan</span><span class="p">(</span><span class="n">touches</span><span class="p">,</span> <span class="nl">withEvent</span><span class="p">:</span> <span class="n">event</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="k">let</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="n">touches</span><span class="p">.</span><span class="n">first</span> <span class="kt">as</span><span class="o">?</span> <span class="bp">UITouch</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="n">locationInView</span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">view</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">let</span> <span class="n">searchCircleY</span> <span class="o">=</span> <span class="n">bottomView</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">searchCircleImageView</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span>
</span><span class='line'>        <span class="k">let</span> <span class="n">frame</span> <span class="o">=</span> <span class="bp">CGRect</span><span class="p">(</span><span class="nl">origin</span><span class="p">:</span> <span class="bp">CGPoint</span><span class="p">(</span><span class="nl">x</span><span class="p">:</span><span class="n">searchCircleImageView</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="nl">y</span><span class="p">:</span><span class="n">searchCircleY</span><span class="p">)</span> <span class="p">,</span> <span class="nl">size</span><span class="p">:</span> <span class="n">searchCircleImageView</span><span class="p">.</span><span class="n">size</span><span class="p">)</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">CGRectContainsPoint</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 点击在searchCircleImageView</span>
</span><span class='line'>            <span class="n">dismissViewControllerAnimated</span><span class="p">(</span><span class="nb">true</span><span class="p">,</span> <span class="nl">completion</span><span class="p">:</span> <span class="nb">nil</span><span class="p">)</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><br /></p>

<h4>隐藏键盘(点击屏幕任意位置)</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="p">-(</span><span class="kt">void</span><span class="p">)</span><span class="nf">touchesBegan:</span><span class="p">(</span><span class="bp">NSSet</span> <span class="o">*</span><span class="p">)</span><span class="nv">touches</span> <span class="nf">withEvent:</span><span class="p">(</span><span class="bp">UIEvent</span> <span class="o">*</span><span class="p">)</span><span class="nv">event</span><span class="p">{</span>
</span><span class='line'>  <span class="p">[</span><span class="nb">super</span> <span class="nl">touchesBegan</span><span class="p">:</span><span class="n">touches</span> <span class="nl">withEvent</span><span class="p">:</span><span class="n">event</span><span class="p">];</span>
</span><span class='line'>  <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">view</span> <span class="nl">endEditing</span><span class="p">:</span><span class="nb">YES</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><br /></p>

<p>在包含 <code>UITableView</code> 视图中添加单击手势
如果在包含 <code>UITableView</code> 视图中添加单击手势，这个单击手势会屏蔽掉 <code>UITableView</code>的 <code>-didSelectRowAtIndexPath</code></p>

<p>在单击点位于UITableView内的时候取消响应</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">gestureRecognizerShouldBegin:</span><span class="p">(</span><span class="bp">UIGestureRecognizer</span> <span class="o">*</span><span class="p">)</span><span class="nv">gestureRecognizer</span><span class="p">{</span>
</span><span class='line'>  <span class="bp">CGPoint</span> <span class="n">point</span> <span class="o">=</span> <span class="p">[</span><span class="n">gestureRecognizer</span> <span class="nl">locationInView</span><span class="p">:</span><span class="nb">self</span><span class="p">];</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="n">CGRectContainsPoint</span><span class="p">(</span><span class="n">menuTableView</span><span class="p">.</span><span class="n">frame</span><span class="p">,</span> <span class="n">point</span><span class="p">)){</span>
</span><span class='line'>      <span class="k">return</span> <span class="nb">NO</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="nb">YES</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>简单点的就将单击手势的 <code>cancelsTouchesInView</code> 设置为 NO 即可</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">singleTap</span><span class="p">.</span><span class="n">cancelsTouchesInView</span> <span class="o">=</span> <span class="nb">false</span>
</span></code></pre></td></tr></table></div></figure>


<blockquote><p>默认为YES，若NO，Gesture Recognizers和hit-test view同时响应触摸序列</p></blockquote>

<p><br /></p>

<h4>Octopress</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">rake</span> <span class="s">&quot;new_post[Post Title]&quot;</span> <span class="c1">// zsh下</span>
</span><span class='line'><span class="n">rake</span> <span class="n">generate</span>                                  <span class="err">生成</span><span class="n">html</span><span class="err">文件</span>
</span><span class='line'><span class="n">rake</span> <span class="n">preview</span>
</span><span class='line'><span class="n">rake</span> <span class="n">deploy</span>                                    <span class="err">部署文章（博客）</span>
</span></code></pre></td></tr></table></div></figure>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">git</span> <span class="n">add</span> <span class="p">.</span>
</span><span class='line'><span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="err">&#39;</span><span class="n">initial</span> <span class="n">source</span> <span class="n">commit</span><span class="err">&#39;</span>
</span><span class='line'><span class="n">git</span> <span class="n">push</span> <span class="n">origin</span> <span class="n">source</span>
</span></code></pre></td></tr></table></div></figure>


<p>deploy 时 <code>non-fast-forward</code> 问题解决方案</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">cd</span> <span class="n">octopress</span><span class="o">/</span><span class="n">_deploy</span>
</span><span class='line'><span class="n">git</span> <span class="n">pull</span> <span class="n">origin</span> <span class="n">master</span>
</span><span class='line'><span class="n">cd</span> <span class="p">..</span>
</span><span class='line'><span class="n">rake</span> <span class="n">deploy</span>
</span></code></pre></td></tr></table></div></figure>


<p><br /></p>

<h5>Can&rsquo;t ignore UserInterfaceState.xcuserstate</h5>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table style="margin-top: 5px; margin-left: -15px;"><tr><td class="gutter"><pre></pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">git</span> <span class="n">rm</span> <span class="o">--</span><span class="n">cached</span> <span class="n">ProjectFolder</span><span class="p">.</span><span class="n">xcodeproj</span><span class="o">/</span><span class="n">project</span><span class="p">.</span><span class="n">xcworkspace</span><span class="o">/</span><span class="n">xcuserdata</span><span class="o">/</span><span class="n">myUserName</span><span class="p">.</span><span class="n">xcuserdatad</span><span class="o">/</span><span class="n">UserInterfaceState</span><span class="p">.</span><span class="n">xcuserstate</span>
</span><span class='line'><span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="s">&quot;Removed file that shouldn&#39;t be tracked&quot;</span>
</span></code></pre></td></tr></table></div></figure>




	</div>



<div class="meta">
	<div class="center"><a href="#"></a></div>
</div>

	<br />
	<br />
</article>


	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
		
		
		
		
	</div>
	
</div>



</div>
	<footer id="footer" class="inner"><p><br /></p>
Copyright &copy; 2017

  <a href="http://weibo.com/u/1783821582">Limon</a>


<p><br /></p>
</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox({
	  padding : 0
	});
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>